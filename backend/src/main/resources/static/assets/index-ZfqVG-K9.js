var ke=Object.defineProperty;var Ue=(e,t,l)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var re=(e,t,l)=>Ue(e,typeof t!="symbol"?t+"":t,l);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function l(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=l(r);fetch(r.href,o)}})();function A(){}function Oe(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function $e(e){return e()}function ae(){return Object.create(null)}function M(e){e.forEach($e)}function ve(e){return typeof e=="function"}function te(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Pe(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function g(e,t,l){e.insertBefore(t,l||null)}function m(e){e.parentNode&&e.parentNode.removeChild(e)}function we(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function a(e){return document.createElement(e)}function R(e){return document.createTextNode(e)}function b(){return R(" ")}function Ce(){return R("")}function N(e,t,l,n){return e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)}function T(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function Ee(e){return Array.from(e.childNodes)}function x(e,t){t=""+t,e.data!==t&&(e.data=t)}function U(e,t){e.value=t??""}function G(e,t,l,n){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,"")}let D;function B(e){D=e}function Ne(){if(!D)throw new Error("Function called outside component initialization");return D}const H=[],he=[];let K=[];const _e=[],Le=Promise.resolve();let se=!1;function Se(){se||(se=!0,Le.then(ce))}function ie(e){K.push(e)}const oe=new Set;let z=0;function ce(){if(z!==0)return;const e=D;do{try{for(;z<H.length;){const t=H[z];z++,B(t),je(t.$$)}}catch(t){throw H.length=0,z=0,t}for(B(null),H.length=0,z=0;he.length;)he.pop()();for(let t=0;t<K.length;t+=1){const l=K[t];oe.has(l)||(oe.add(l),l())}K.length=0}while(H.length);for(;_e.length;)_e.pop()();se=!1,oe.clear(),B(e)}function je(e){if(e.fragment!==null){e.update(),M(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ie)}}function Ae(e){const t=[],l=[];K.forEach(n=>e.indexOf(n)===-1?t.push(n):l.push(n)),l.forEach(n=>n()),K=t}const Q=new Set;let F;function Te(){F={r:0,c:[],p:F}}function Ie(){F.r||M(F.c),F=F.p}function W(e,t){e&&e.i&&(Q.delete(e),e.i(t))}function X(e,t,l,n){if(e&&e.o){if(Q.has(e))return;Q.add(e),F.c.push(()=>{Q.delete(e),n&&(l&&e.d(1),n())}),e.o(t)}else n&&n()}function qe(e,t){const l=t.token={};function n(r,o,u,d){if(t.token!==l)return;t.resolved=d;let i=t.ctx;u!==void 0&&(i=i.slice(),i[u]=d);const f=r&&(t.current=r)(i);let y=!1;t.block&&(t.blocks?t.blocks.forEach((s,c)=>{c!==o&&s&&(Te(),X(s,1,1,()=>{t.blocks[c]===s&&(t.blocks[c]=null)}),Ie())}):t.block.d(1),f.c(),W(f,1),f.m(t.mount(),t.anchor),y=!0),t.block=f,t.blocks&&(t.blocks[o]=f),y&&ce()}if(Oe(e)){const r=Ne();if(e.then(o=>{B(r),n(t.then,1,t.value,o),B(null)},o=>{if(B(r),n(t.catch,2,t.error,o),B(null),!t.hasCatch)throw o}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,e),!0;t.resolved=e}}function Be(e,t,l){const n=t.slice(),{resolved:r}=e;e.current===e.then&&(n[e.value]=r),e.current===e.catch&&(n[e.error]=r),e.block.p(n,l)}function ee(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ue(e){e&&e.c()}function Y(e,t,l){const{fragment:n,after_update:r}=e.$$;n&&n.m(t,l),ie(()=>{const o=e.$$.on_mount.map($e).filter(ve);e.$$.on_destroy?e.$$.on_destroy.push(...o):M(o),e.$$.on_mount=[]}),r.forEach(ie)}function Z(e,t){const l=e.$$;l.fragment!==null&&(Ae(l.after_update),M(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function Je(e,t){e.$$.dirty[0]===-1&&(H.push(e),Se(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,l,n,r,o,u=null,d=[-1]){const i=D;B(e);const f=e.$$={fragment:null,ctx:[],props:o,update:A,not_equal:r,bound:ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:ae(),dirty:d,skip_bound:!1,root:t.target||i.$$.root};u&&u(f.root);let y=!1;if(f.ctx=l?l(e,t.props||{},(s,c,...v)=>{const _=v.length?v[0]:c;return f.ctx&&r(f.ctx[s],f.ctx[s]=_)&&(!f.skip_bound&&f.bound[s]&&f.bound[s](_),y&&Je(e,s)),c}):[],f.update(),y=!0,M(f.before_update),f.fragment=n?n(f.ctx):!1,t.target){if(t.hydrate){const s=Ee(t.target);f.fragment&&f.fragment.l(s),s.forEach(m)}else f.fragment&&f.fragment.c();t.intro&&W(e.$$.fragment),Y(e,t.target,t.anchor),ce()}B(i)}class le{constructor(){re(this,"$$");re(this,"$$set")}$destroy(){Z(this,1),this.$destroy=A}$on(t,l){if(!ve(l))return A;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(l),()=>{const r=n.indexOf(l);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!Pe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Me="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Me);function Ve(e){let t,l,n,r,o,u,d,i,f,y,s,c,v,_,k,O,L,P,I,S,h,$,V,j,q;return{c(){t=a("h1"),t.textContent="Create a poll",l=b(),n=a("div"),r=a("input"),o=b(),u=a("br"),d=b(),i=a("input"),f=b(),y=a("br"),s=b(),c=a("input"),v=b(),_=a("br"),k=b(),O=a("input"),L=b(),P=a("br"),I=b(),S=a("button"),S.textContent="Create poll",h=b(),$=a("p"),V=R(e[4]),T(r,"placeholder","id"),T(i,"placeholder","question"),T(c,"placeholder","option1"),T(O,"placeholder","option2")},m(w,E){g(w,t,E),g(w,l,E),g(w,n,E),p(n,r),U(r,e[0]),p(n,o),p(n,u),p(n,d),p(n,i),U(i,e[1]),p(n,f),p(n,y),p(n,s),p(n,c),U(c,e[2]),p(n,v),p(n,_),p(n,k),p(n,O),U(O,e[3]),p(n,L),p(n,P),p(n,I),p(n,S),p(n,h),p(n,$),p($,V),j||(q=[N(r,"input",e[7]),N(i,"input",e[8]),N(c,"input",e[9]),N(O,"input",e[10]),N(S,"click",e[5])],j=!0)},p(w,[E]){E&1&&r.value!==w[0]&&U(r,w[0]),E&2&&i.value!==w[1]&&U(i,w[1]),E&4&&c.value!==w[2]&&U(c,w[2]),E&8&&O.value!==w[3]&&U(O,w[3]),E&16&&x(V,w[4])},i:A,o:A,d(w){w&&(m(t),m(l),m(n)),j=!1,M(q)}}}function Fe(e,t,l){let{currentUser:n}=t,r=0,o="",u="",d="",i="";function f(){n!==""&&fetch("http://localhost:8080/api/polls",{method:"POST",body:JSON.stringify({id:r,owner:n,question:o,options:[u,d]}),headers:{"Content-Type":"application/json"}}).then(_=>{_.status===201&&(l(4,i=`Poll ${r} successfully created!`),console.log(i),l(1,o=""),l(2,u=""),l(3,d=""))}).catch(_=>{l(4,i=_.message),console.error(i)})}function y(){r=this.value,l(0,r)}function s(){o=this.value,l(1,o)}function c(){u=this.value,l(2,u)}function v(){d=this.value,l(3,d)}return e.$$set=_=>{"currentUser"in _&&l(6,n=_.currentUser)},[r,o,u,d,i,f,n,y,s,c,v]}class ze extends le{constructor(t){super(),ne(this,t,Fe,Ve,te,{currentUser:6})}}function He(e){let t,l,n,r,o,u,d,i,f,y,s,c,v,_,k,O,L,P,I,S;return{c(){t=a("h2"),t.textContent="Create a user!",l=b(),n=a("input"),r=b(),o=a("br"),u=b(),d=a("input"),i=b(),f=a("br"),y=b(),s=a("input"),c=b(),v=a("br"),_=b(),k=a("button"),k.textContent="Create user",O=b(),L=a("p"),P=R(e[3]),T(n,"placeholder","Username"),T(d,"placeholder","Password"),T(d,"type","password"),T(s,"placeholder","Email address"),T(s,"type","email")},m(h,$){g(h,t,$),g(h,l,$),g(h,n,$),U(n,e[0]),g(h,r,$),g(h,o,$),g(h,u,$),g(h,d,$),U(d,e[1]),g(h,i,$),g(h,f,$),g(h,y,$),g(h,s,$),U(s,e[2]),g(h,c,$),g(h,v,$),g(h,_,$),g(h,k,$),g(h,O,$),g(h,L,$),p(L,P),I||(S=[N(n,"input",e[6]),N(d,"input",e[7]),N(s,"input",e[8]),N(k,"click",e[4])],I=!0)},p(h,[$]){$&1&&n.value!==h[0]&&U(n,h[0]),$&2&&d.value!==h[1]&&U(d,h[1]),$&4&&s.value!==h[2]&&U(s,h[2]),$&8&&x(P,h[3])},i:A,o:A,d(h){h&&(m(t),m(l),m(n),m(r),m(o),m(u),m(d),m(i),m(f),m(y),m(s),m(c),m(v),m(_),m(k),m(O),m(L)),I=!1,M(S)}}}function Ke(e,t,l){let{currentUser:n}=t,r,o,u,d="";function i(){fetch("http://localhost:8080/api/users",{method:"POST",body:JSON.stringify({username:r,password:o,email:u}),headers:{"Content-Type":"application/json"}}).then(c=>{c.status===201&&(l(3,d=`User ${r} successfully created!`),console.log(d),l(5,n=r),l(0,r=""),l(1,o=""),l(2,u=""))}).catch(c=>{l(3,d=c.message),console.error(d)})}function f(){r=this.value,l(0,r)}function y(){o=this.value,l(1,o)}function s(){u=this.value,l(2,u)}return e.$$set=c=>{"currentUser"in c&&l(5,n=c.currentUser)},[r,o,u,d,i,n,f,y,s]}class Re extends le{constructor(t){super(),ne(this,t,Ke,He,te,{currentUser:5})}}function me(e,t,l){const n=e.slice();return n[6]=t[l],n}function ge(e,t,l){const n=e.slice();return n[9]=t[l],n}function We(e){let t;return{c(){t=a("p"),t.textContent=`Polls could not be fetched: ${e[12]}`},m(l,n){g(l,t,n)},p:A,d(l){l&&m(t)}}}function De(e){let t,l=ee(e[1]),n=[];for(let r=0;r<l.length;r+=1)n[r]=ye(me(e,l,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Ce()},m(r,o){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(r,o);g(r,t,o)},p(r,o){if(o&3){l=ee(r[1]);let u;for(u=0;u<l.length;u+=1){const d=me(r,l,u);n[u]?n[u].p(d,o):(n[u]=ye(d),n[u].c(),n[u].m(t.parentNode,t))}for(;u<n.length;u+=1)n[u].d(1);n.length=l.length}},d(r){r&&m(t),we(n,r)}}}function be(e){let t,l,n,r,o,u,d,i;function f(){return e[3](e[6],e[9])}function y(...s){return e[4](e[9],...s)}return{c(){t=a("button"),t.textContent=`${e[9].caption}`,l=b(),n=a("p"),r=a("b"),r.textContent=`Votes: ${e[6].votes.filter(y).length}`,o=b(),u=a("br")},m(s,c){g(s,t,c),g(s,l,c),g(s,n,c),p(n,r),g(s,o,c),g(s,u,c),d||(i=N(t,"click",f),d=!0)},p(s,c){e=s},d(s){s&&(m(t),m(l),m(n),m(o),m(u)),d=!1,i()}}}function ye(e){let t,l,n,r,o,u,d,i,f,y=ee(e[6].options),s=[];for(let c=0;c<y.length;c+=1)s[c]=be(ge(e,y,c));return{c(){t=a("div"),l=a("h2"),l.textContent=`Poll #${e[6].id}`,n=b(),r=a("h3"),r.textContent=`${e[6].question}`,o=b(),u=a("p"),u.textContent=`Owner: ${e[6].owner}`,d=b(),i=a("div");for(let c=0;c<s.length;c+=1)s[c].c();f=b(),G(t,"border","dotted 1px black"),G(t,"background","#eeeeee"),G(t,"padding","10px"),G(t,"margin","15px")},m(c,v){g(c,t,v),p(t,l),p(t,n),p(t,r),p(t,o),p(t,u),p(t,d),p(t,i);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(i,null);p(t,f)},p(c,v){if(v&3){y=ee(c[6].options);let _;for(_=0;_<y.length;_+=1){const k=ge(c,y,_);s[_]?s[_].p(k,v):(s[_]=be(k),s[_].c(),s[_].m(i,null))}for(;_<s.length;_+=1)s[_].d(1);s.length=y.length}},d(c){c&&m(t),we(s,c)}}}function Ge(e){let t;return{c(){t=a("p"),t.textContent="Waiting for polls..."},m(l,n){g(l,t,n)},p:A,d(l){l&&m(t)}}}function Qe(e){let t,l,n,r={ctx:e,current:null,token:null,hasCatch:!0,pending:Ge,then:De,catch:We,value:1,error:12};return qe(e[1],r),{c(){t=a("h1"),t.textContent="Active polls",l=b(),n=Ce(),r.block.c()},m(o,u){g(o,t,u),g(o,l,u),g(o,n,u),r.block.m(o,r.anchor=u),r.mount=()=>n.parentNode,r.anchor=n},p(o,[u]){e=o,Be(r,e,u)},i:A,o:A,d(o){o&&(m(t),m(l),m(n)),r.block.d(o),r.token=null,r=null}}}function Xe(e,t,l){let{currentUser:n}=t,r=fetch("http://localhost:8080/api/polls").then(i=>i.json());function o(i,f){n!==""&&fetch(`http://localhost:8080/api/polls/${i}`,{method:"POST",body:JSON.stringify({user:n,option:f}),headers:{"Content-Type":"application/json"}}).then(y=>{y.status}).catch(y=>{y.message,console.log(f)})}const u=(i,f)=>o(i.id,f.caption),d=(i,f)=>f.option.caption==i.caption;return e.$$set=i=>{"currentUser"in i&&l(2,n=i.currentUser)},[o,r,n,u,d]}class Ye extends le{constructor(t){super(),ne(this,t,Xe,Qe,te,{currentUser:2})}}function Ze(e){let t,l,n,r,o,u=e[0]===""?"Not logged in.":"Logged in as ",d,i,f,y,s,c,v,_,k,O,L,P,I,S,h,$,V,j,q,w,E;return P=new Re({props:{currentUser:e[0]}}),h=new ze({props:{currentUser:e[0]}}),j=new Ye({props:{currentUser:e[0]}}),{c(){t=a("main"),l=a("h1"),l.innerHTML="<u>Poll App</u>",n=b(),r=a("div"),o=a("h2"),d=R(u),i=b(),f=R(e[0]),y=b(),s=a("h2"),s.textContent="Log in:",c=b(),v=a("input"),_=b(),k=a("button"),k.textContent="Log in",O=b(),L=a("div"),ue(P.$$.fragment),I=b(),S=a("div"),ue(h.$$.fragment),$=b(),V=a("div"),ue(j.$$.fragment),T(v,"placeholder","Username")},m(C,J){g(C,t,J),p(t,l),p(t,n),p(t,r),p(r,o),p(o,d),p(o,i),p(o,f),p(r,y),p(r,s),p(r,c),p(r,v),U(v,e[1]),p(r,_),p(r,k),p(t,O),p(t,L),Y(P,L,null),p(t,I),p(t,S),Y(h,S,null),p(t,$),p(t,V),Y(j,V,null),q=!0,w||(E=[N(v,"input",e[3]),N(k,"click",e[4])],w=!0)},p(C,[J]){(!q||J&1)&&u!==(u=C[0]===""?"Not logged in.":"Logged in as ")&&x(d,u),(!q||J&1)&&x(f,C[0]),J&2&&v.value!==C[1]&&U(v,C[1]);const fe={};J&1&&(fe.currentUser=C[0]),P.$set(fe);const pe={};J&1&&(pe.currentUser=C[0]),h.$set(pe);const de={};J&1&&(de.currentUser=C[0]),j.$set(de)},i(C){q||(W(P.$$.fragment,C),W(h.$$.fragment,C),W(j.$$.fragment,C),q=!0)},o(C){X(P.$$.fragment,C),X(h.$$.fragment,C),X(j.$$.fragment,C),q=!1},d(C){C&&m(t),Z(P),Z(h),Z(j),w=!1,M(E)}}}function xe(e,t,l){let n="",r="";function o(i){l(0,n=i),i=""}function u(){r=this.value,l(1,r)}return[n,r,o,u,()=>o(r)]}class et extends le{constructor(t){super(),ne(this,t,xe,Ze,te,{})}}new et({target:document.getElementById("app")});
